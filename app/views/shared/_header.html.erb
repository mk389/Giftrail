<div class="navbar justify-start">
  <div class="flex-1">
    <%= link_to 'Giftrail', root_path, class: 'btn btn-ghost text-3xl px-6' %>
  </div>

  <div class="flex-none mr-4">
    <ul class="menu menu-horizontal px-1">
      <% if user_signed_in? %> <!-- ログインしている場合 -->
        <li>
          <details class="relative">
            <summary class="font-semibold">メニュー</summary>
            <ul class="bg-base-100 rounded-t-none p-2 absolute left-0 mt-1 z-10">
              <li><%= link_to '投稿作成', new_post_path, class: 'btn btn-ghost px-2 py-2' %></li>
              <li><%= link_to '投稿一覧', posts_path, class: 'btn btn-ghost px-2 py-2' %></li>
              <li><%= link_to 'プロフィール編集', edit_user_registration_path, class: 'btn btn-ghost px-2 py-2' %></li>
              <li><%= link_to 'お問い合わせ', new_contact_path, class: 'btn btn-ghost px-2 py-2' %></li>
              <li><%= link_to "ログアウト", destroy_user_session_path, method: :delete, class: 'btn btn-ghost px-2 py-2' %></li>
            </ul>
          </details>
        </li>

        <!-- アバター部分 -->
        <li>
          <!-- プロフィールアイコン（リンク先を#に設定） -->
          <a href="#" onclick="return false;">
            <div style="width: 40px; height: 40px; border-radius: 50%; overflow: hidden;">
              <img src="<%= current_user.icon_url || asset_path('default_avatar.png') %>" alt="ユーザーアバター" style="width: 100%; height: 100%; object-fit: cover;" />
            </div>
          </a>
        </li>

      <% else %> <!-- ログインしていない場合 -->
        <li><%= link_to 'ログイン', new_user_session_path, class: 'font-semibold' %></li>
        <li>
          <details class="relative">
            <summary class="font-semibold">メニュー</summary>
            <ul class="bg-base-100 rounded-t-none p-2 absolute left-0 mt-1 z-10">
              <li><%= link_to '投稿一覧', posts_path, class: 'btn btn-ghost px-2 py-2' %></li>
              <li><%= link_to 'お問い合わせ', new_contact_path, class: 'btn btn-ghost px-2 py-2' %></li>
            </ul>
          </details>
        </li>
      <% end %>
    </ul>
  </div>
</div>
